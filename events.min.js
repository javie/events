(function(){var b,a,e,d;b=this;a=function(){return a.make();};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports){exports=module.exports=a;
}exports.Events=a;}else{if("undefined"===typeof b.Javie){b.Javie={};}b.Javie.Events=a;}e=b._;if(!e&&("undefined"!==typeof require)){e=require("underscore");
}if(!e){throw new Error("Expected Underscore.js not available");}a.make=function c(){var n,o;o=this;if(!e.isNull(d)&&!e.isUndefined(d)){return d;}n={};
d={listen:function j(q,p){if(!e.isFunction(p)){throw new Error("Callback is not a function");}if(e.isNull(n[q])||e.isUndefined(n[q])){n[q]=[];}n[q].push(p);
return{id:q,cb:p};},listener:function i(q,p){return this.listen(q,p);},fire:function h(t,s){var q,p;q=this;p=[];if(e.isNull(t)){throw new Error("Event ID is not provided: ["+t+"]");
}if(e.isNull(n[t])||e.isNull(n[t])){return null;}e.each(n[t],function r(v,u){p.push(v.apply(q,s||[]));});return p;},first:function k(u,t){var q,p,s;q=this;
p=[];if(e.isNull(u)){throw new Error("Event ID is not provided: ["+u+"]");}if(e.isNull(n[u])||e.isNull(n[u])){return null;}s=n[u].slice(0,1);e.each(s,function r(w,v){p.push(w.apply(q,t||[]));
});return p[0];},until:function g(t,s){var q,p;q=this;p=null;if(e.isNull(t)){throw new Error("Event ID is not provided: ["+t+"]");}if(e.isNull(n[t])||e.isNull(n[t])){return null;
}e.each(n[t],function r(v,u){if(e.isNull(p)){p=v.apply(q,s||[]);}});return null;},flush:function m(p){if(!e.isUndefined(n[p])){n[p]=null;}},forget:function f(r){var s,t,p;
s=this;t=r.id;p=r.cb;if(!e.isString(t)){throw new Error("Event ID is not provided: ["+t+"]");}if(!e.isFunction(p)){throw new Error("Callback is not a function");
}if(e.isNull(n[t])){throw new Error("No registered event found for ["+t+"]");}e.each(n[t],function q(v,u){if(v===p){n[t].splice(u,1);}});},clone:function l(q){return{to:function p(r){n[r]=e.clone(n[q]);
}};}};return d;};}).call(this);