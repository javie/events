(function(){var a,e,d,c;a=this;e=function(){return e.make();};if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.exports){exports=module.exports=e;
}exports.Events=exports.EventDispatcher=e;}else{if("undefined"===typeof a.Javie){a.Javie={};}a.Javie.EventDispatcher=a.Javie.Events=e;}d=a._;if(!d&&("undefined"!==typeof require)){d=require("underscore");
}if(!d){throw new Error("Expected Underscore.js not available");}e.make=function b(){var n,o;o=this;if(!d.isNull(c)&&!d.isUndefined(c)){return c;}n={};
c={listen:function j(q,p){if(!d.isFunction(p)){throw new Error("Callback is not a function");}if(d.isNull(n[q])||d.isUndefined(n[q])){n[q]=[];}n[q].push(p);
return{id:q,cb:p};},listener:function i(q,p){return this.listen(q,p);},fire:function h(t,s){var q,p;q=this;p=[];if(d.isNull(t)){throw new Error("Event ID is not provided: ["+t+"]");
}if(d.isNull(n[t])||d.isNull(n[t])){return null;}d.each(n[t],function r(v,u){p.push(v.apply(q,s||[]));});return p;},first:function k(u,t){var q,p,s;q=this;
p=[];if(d.isNull(u)){throw new Error("Event ID is not provided: ["+u+"]");}if(d.isNull(n[u])||d.isNull(n[u])){return null;}s=n[u].slice(0,1);d.each(s,function r(w,v){p.push(w.apply(q,t||[]));
});return p[0];},until:function g(t,s){var q,p;q=this;p=null;if(d.isNull(t)){throw new Error("Event ID is not provided: ["+t+"]");}if(d.isNull(n[t])||d.isNull(n[t])){return null;
}d.each(n[t],function r(v,u){if(d.isNull(p)){p=v.apply(q,s||[]);}});return null;},flush:function m(p){if(!d.isUndefined(n[p])){n[p]=null;}},forget:function f(r){var s,t,p;
s=this;t=r.id;p=r.cb;if(!d.isString(t)){throw new Error("Event ID is not provided: ["+t+"]");}if(!d.isFunction(p)){throw new Error("Callback is not a function");
}if(d.isNull(n[t])){throw new Error("No registered event found for ["+t+"]");}d.each(n[t],function q(v,u){if(v===p){n[t].splice(u,1);}});},clone:function l(q){return{to:function p(r){n[r]=d.clone(n[q]);
}};}};return c;};}).call(this);